<template>
	<nav class="top-0 fixed z-50 w-full flex flex-wrap items-center justify-between px-2 py-3 navbar-expand-lg bg-ahl-blue dark:bg-stone-800 shadow-md text-white">
    <div class="grid w-full">
      <div class="justify-self-end mr-20 hidden lg:flex space-x-8 text-sm relative">
        <p class="hidden xl:flex text-white font-semibold">
          We bring you premium beach plots in Malindi
        </p>
        <div class="flex space-x-4">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path></svg>
          <span class="font-semibold">
            0734 990 660
          </span>
        </div>
        <div class="flex space-x-4">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"></path></svg>
          <span class="font-semibold">
            info@ahlproperties.co.ke
          </span>
        </div>
        <a href="https://www.facebook.com/ahlproperties.ke" target="_blank">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="white" d="M24 5A19 19 0 1 0 24 43A19 19 0 1 0 24 5Z"/><path fill="#00409A" d="M26.572,29.036h4.917l0.772-4.995h-5.69v-2.73c0-2.075,0.678-3.915,2.619-3.915h3.119v-4.359c-0.548-0.074-1.707-0.236-3.897-0.236c-4.573,0-7.254,2.415-7.254,7.917v3.323h-4.701v4.995h4.701v13.729C22.089,42.905,23.032,43,24,43c0.875,0,1.729-0.08,2.572-0.194V29.036z"/></svg>
          </a>
          <a href="https://twitter.com/ahl_properties" target="_blank">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><linearGradient id="_osn9zIN2f6RhTsY8WhY4a" x1="10.341" x2="40.798" y1="8.312" y2="38.769" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="white"/><stop offset="1" stop-color="white"/></linearGradient><path fill="url(#_osn9zIN2f6RhTsY8WhY4a)" d="M46.105,11.02c-1.551,0.687-3.219,1.145-4.979,1.362c1.789-1.062,3.166-2.756,3.812-4.758  c-1.674,0.981-3.529,1.702-5.502,2.082C37.86,8.036,35.612,7,33.122,7c-4.783,0-8.661,3.843-8.661,8.582  c0,0.671,0.079,1.324,0.226,1.958c-7.196-0.361-13.579-3.782-17.849-8.974c-0.75,1.269-1.172,2.754-1.172,4.322 c0,2.979,1.525,5.602,3.851,7.147c-1.42-0.043-2.756-0.438-3.926-1.072c0,0.026,0,0.064,0,0.101c0,4.163,2.986,7.63,6.944,8.419 c-0.723,0.198-1.488,0.308-2.276,0.308c-0.559,0-1.104-0.063-1.632-0.158c1.102,3.402,4.299,5.889,8.087,5.963  c-2.964,2.298-6.697,3.674-10.756,3.674c-0.701,0-1.387-0.04-2.065-0.122C7.73,39.577,12.283,41,17.171,41  c15.927,0,24.641-13.079,24.641-24.426c0-0.372-0.012-0.742-0.029-1.108C43.483,14.265,44.948,12.751,46.105,11.02"/></svg>
          </a>
          <!--<a href="https://youtube.com/ahlproperties" target="_blank">
            <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="white" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z"/><path fill="#00409A" d="M20 31L20 17 32 24z"/></svg>
          </a>-->
          <a href="https://instagram.com/ahlproperties.ke" target="_blank">
            <svg class="w-6 h-6" fill="white" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 50 50" width="50px" height="50px">    <path d="M 16 3 C 8.83 3 3 8.83 3 16 L 3 34 C 3 41.17 8.83 47 16 47 L 34 47 C 41.17 47 47 41.17 47 34 L 47 16 C 47 8.83 41.17 3 34 3 L 16 3 z M 37 11 C 38.1 11 39 11.9 39 13 C 39 14.1 38.1 15 37 15 C 35.9 15 35 14.1 35 13 C 35 11.9 35.9 11 37 11 z M 25 14 C 31.07 14 36 18.93 36 25 C 36 31.07 31.07 36 25 36 C 18.93 36 14 31.07 14 25 C 14 18.93 18.93 14 25 14 z M 25 16 C 20.04 16 16 20.04 16 25 C 16 29.96 20.04 34 25 34 C 29.96 34 34 29.96 34 25 C 34 20.04 29.96 16 25 16 z"/></svg>
          </a>
      </div>
    </div>
    <div class="container px-4 mx-auto flex flex-wrap items-center justify-between">
      <div class="w-full relative flex justify-between lg:w-auto lg:static lg:block lg:justify-start">
        <a
          class="text-xl lg:text-4xl leading-relaxed inline-block mr-4 pt-3 whitespace-nowrap uppercase flex"
          href="/"
        >
          <img src="/logo.webp" class="w-8 lg:w-12 bg-white rounded-full" width="100" height="100" alt="AHL Logo">
          <p class="hidden xl:flex text-xl ml-2 mt-3 text-white font-semibold capitalize">
            {{name}}
          </p>
        </a>
        <button
          class="cursor-pointer text-xl leading-none px-3 py-1 border border-solid border-transparent rounded bg-transparent block lg:hidden outline-none focus:outline-none"
          type="button"
          v-on:click="setNavbarOpen"
        >
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
          <span class="sr-only">Mobile Menu Navigation</span>
        </button>
      </div>
      <div
        class="lg:flex flex-grow items-center"
        :class="[navbarOpen ? 'block' : 'hidden']"
        id="example-navbar-warning"
      >
        <ul class="flex flex-col lg:flex-row lg:space-x-8 list-none lg:ml-auto uppercase font-medium text-stone-800 font-semibold">
          <li class="flex items-center">
            <a
              class="text-white text-white px-3 py-2 flex items-center"
              exact-active-class="border-b-2 border-white"
              href="/"
            >
              Home
            </a>
          </li>
          <li class="flex items-center">
            <a
              class="text-white text-white px-3 py-2 flex items-center"
              exact-active-class="border-b-2 border-white"
              href="/about"
            >
              About Us
            </a>
          </li>
          <li class="flex items-center">
            <div class="text-white text-white px-3 py-2 flex items-center"
              exact-active-class="border-b-2 border-white">
              <div class="relative" @mouseover="propertiesActive = true" @mouseleave="propertiesActive = false">
                <button type="button" class="group rounded-md inline-flex items-center text-white text-white flex items-center uppercase" :aria-expanded="propertiesActive ? 'true' : 'false'">
                  <span>Properties</span>
                  <svg class="text-white text-white ml-2 h-5 w-5 group-hover:text-black" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" />
                  </svg>
                </button>
                <div :class="`w-56 sm:w-48 absolute z-10 -ml-6 mt-0 transform px-2 sm:px-0 lg:ml-0 lg:left-1/2 lg:-translate-x-1/2 ${propertiesActive ? '' : 'hidden'} shadow-lg`" @mouseover="propertiesActive = true" @mouseleave="propertiesActive = false">
                  <div class="shadow-lg overflow-hidden">
                    <div class="relative grid gap-2 bg-white dark:bg-stone-800 p-1 lg:p-2">
                      <a :href="`/property/${item.slug}`" v-for="item in propertylinks" :key="item.id" class="text-stone-800 dark:text-white px-3 py-2 flex items-center capitalize bg-stone-200 dark:bg-stone-700 text-sm"
                      @click="propertiesActive = ! propertiesActive, setNavbarOpen()">
                        {{item.plot_name}}
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </li>
          <li class="flex items-center">
            <a
              class="text-white text-white px-3 py-2 flex items-center"
              exact-active-class="border-b-2 border-white"
              href="/faqs"
            >
              Faqs
            </a>
          </li>
          <li class="flex items-center">
            <a
              class="text-white text-white px-3 py-2 flex items-center"
              exact-active-class="border-b-2 border-white"
              href="/contact-us"
            >
              Contact Us
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</template>

<script>
import {Directus} from '@directus/sdk'
export default{
	data(){
		return{
			directus: new Directus(import.meta.env.PUBLIC_CMS_LOCATION),
			navbarOpen: false,
      name: 'AHL Properties',
      propertiesActive:false,
      propertylinks:[],
      aboutActive:false,
    }
  },
  methods:{
    setNavbarOpen() {
      this.navbarOpen = !this.navbarOpen;
    },
    loadLinks(){
    	this.directus.items('plots').readByQuery({
				filter:{
					"_and":[
						{
							"status":{
								"_eq":"published"
							}
						}
					]
				},
				fields:['plot_name,slug']
			}).then(resp => {
				this.propertylinks = resp.data
			}).catch()
    }
  },
  created(){
  	this.loadLinks()
  }
}
</script>